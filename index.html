

<!DOCTYPE html>
<html>
<head>
    <title>game</title>
</head>
<body>
    <canvas id="gc" width="1000" height="500"></canvas>
    
    <script src="./player.js"></script>
    <script>
    window.onload=function() {
        canv=document.getElementById("gc");
        ctx=canv.getContext("2d");
        document.addEventListener("keydown",keyPush);
        document.addEventListener("keyup", keyUp);
        canv.addEventListener("onclick", shoot);
        setInterval(game,1000/15);
    }

    var animationArr = []; //dying enemies
    var bulvarArr = [];

    var player = new Player("white", 70, 70, 5);
    var px = 500;
    var py = 250;
    var vx = 0;
    var vy = 0;
    
    var spawnTimer = 50;


    function game ()
    {
        px += (vx * player.getSpeed());
        py += (vy * player.getSpeed());
        ctx.fillStyle="black";
        ctx.fillRect(0,0,canv.width,canv.height);
        
        let size = player.getSize();
        ctx.fillStyle = "white";
        ctx.fillRect(px, py, size.sx, size.sy);
        ctx.fillStyle = player.getColor();
        ctx.fillRect(px+2,py+2,size.sx-4, size.sy-4);
        
        //clear
        ctx.fillStyle = "black";
        ctx.fillRect(0,0,canv.width,canv.height);
        for (var i = 0; i < enemyArr.length; i ++)
        {
            ctx.fillStyle = enemyArr[i].color;
            let move = enemyArr[i].makeMove();
            ctx.fillRect(move[0], move[1], move[2], move[3]);
            enemyArr[i].move(move[0], move[1]);
        }
    }

    function keyPush(evt) {
        console.log(evt.key)
        switch(evt.key) {
            case 'a':
                vx = -1;
                break;
            case 's':
                vy = 1;
                break;
            case 'd':
                vx = 1;
                break;
            case 'w':
                vy = -1;
                break;
        }
    }

    function keyUp(evt){
        switch(evt.key) {
            case 'a':
                vx=0;
                break;
            case 'w':
                vy=0;
                break;
            case 'd':
                vx=0;
                break;
            case 's':
                vy=0;
                break;
            case '1':
                player.setColor("blue");
                break;
            case '2':
                player.setColor("red");
                break;
            case '3':
                player.setColor("green");
                break;
            case '4':
                player.setColor("yellow");
                break;
            
        }
    }

    </script>


</body>
</html>

